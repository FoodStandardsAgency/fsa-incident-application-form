{% extends "layout.njk" %}

{% from "govuk/components/input/macro.njk" import govukInput %}
{% from "govuk/components/textarea/macro.njk" import govukTextarea %}
{% from "govuk/components/fieldset/macro.njk" import govukFieldset %}
{% from "govuk/components/button/macro.njk" import govukButton %}

{% block pageTitle %}
{{ i18n.pageTitle[i18n.languageCode] }}
{% endblock %}

{% block content %}

<form method="POST" action="">

    {% call govukFieldset({
        legend: {
            text: i18n.sections.addProduct[i18n.languageCode],
            classes: "govuk-fieldset__legend--l",
            isPageHeading: true
        }
    }) %}

    {{ govukInput({
        classes: "govuk-!-width-full",
        id: "product-name",
        name: "product-name",
        attributes : {
            "data-cy": "product-name"
        },
        label: {
            text: i18n.productName.label[i18n.languageCode]
        },
        errorMessage: validation.validatedFields.productName.isValid == false and {
            text: validation.validatedFields.productName.messages | join(". "),
            "attributes" : {
                "data-cy": "product-name-errors"
            }
        }
    }) }}

    {{ govukInput({
        classes: "govuk-!-width-full",
        id: "brand",
        name: "brand",
        attributes : {
            "data-cy": "brand"
        },
        label: {
            text: i18n.brand.label[i18n.languageCode]
        },
        errorMessage: validation.validatedFields.brand.isValid == false and {
            text: validation.validatedFields.brand.messages | join(". "),
            "attributes" : {
                "data-cy": "brand-errors"
            }
        }
    }) }}    
    
    {% endcall %}


    {% if tabularDetailsOfCompanies | length > 0 %}
        {{ govukTable({
          caption: i18n.sections.companies[i18n.languageCode],
          firstCellIsHeader: true,
          head: [
            {
              text: i18n.headings.company[i18n.languageCode]
            },
            {
              text: i18n.headings.action[i18n.languageCode]
            }
          ],
          rows: tabularDetailsOfCompanies
        }) }}
    {% else %}
        <div>
        </div>
    {% endif %}


    <div class="govuk-grid-row">
        <div class="govuk-grid-column-one-third">
            {{ govukButton({
              text: i18n.buttons.addCompany[i18n.languageCode],
              href: "/add-company",
              attributes : {
                  "data-cy": "add-company"
              }
            }) }}
        </div>
    </div>

</form>

{% endblock %}
